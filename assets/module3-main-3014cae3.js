import{c as A,p as h,m}from"./footstep-1b0f56b4.js";import{b as y,g as W,q as g,l as _}from"./quests-9d256112.js";WA.onInit().then(async()=>{try{await y(),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),console.log("Scripting API Extra ready")}catch(t){console.error(t)}const r=await W();for(const t of r){let a;WA.room.area.onEnter(t.name).subscribe(()=>{a=WA.ui.displayActionMessage({message:`[LEERTASTE] drücken um mit ${t.npcName} zu sprechen.`,callback:()=>{var s;if(WA.chat.sendChatMessage(t.chatText,t.npcName),t.triggerQuest){const i=WA.player.state.currentQuest,u=(s=g.find(n=>n.questId===t.triggerQuest))==null?void 0:s.requireQuest;i===u&&(WA.player.state.currentQuest=t.triggerQuest)}}})}),WA.room.area.onLeave(t.name).subscribe(()=>{a&&(a.remove(),WA.chat.close())})}WA.player.onPlayerMove(async({x:t,y:a,moving:s})=>{var u,n,l;const i=await A({x:t,y:a});if(!i){(u=m)==null||u.stop();return}if(!s&&!i){(n=m)==null||n.stop();return}else(l=m)==null||l.stop(),h(i)});const e=WA.player.state.currentQuest,o=g.find(t=>t.questId===e);o&&c(o.questId),WA.player.state.onVariableChange("currentQuest").subscribe(t=>{const a=g.find(s=>s.questId===t);a&&c(a.questId)});function c(t){const a=g.find(s=>s.questId===t);a&&WA.ui.banner.openBanner({id:a.questId,text:a.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",closable:!1})}});function f(r){const{moduleName:e,triggerValue:o,startX:c,endX:t,startY:a,endY:s}=r;if(WA.player.state[e]!==o)return;const i=[],u=[];for(let n=c;n<=t;n++)for(let l=a;l<=s;l++)i.push({x:n,y:l,tile:"green",layer:"green"}),u.push({x:n,y:l,tile:null,layer:"red"});WA.room.setTiles(i),WA.room.setTiles(u)}const d={module_3_1:{triggerValue:"3",startX:4,endX:15,startY:71,endY:89},module_3_2:{triggerValue:"3",startX:4,endX:15,startY:47,endY:70}};let b=!1;function p(){if(b)return;const r=Number(WA.player.state.module_2_1),e=Number(WA.player.state.module_2_2),o=Number(d.module_2_1.triggerValue)+Number(d.module_2_2.triggerValue);r+e===o&&(b=!0,WA.player.state.currentQuest="quest10",WA.player.state.module3="solved")}WA.player.state.onVariableChange("module_3_1").subscribe(()=>{p()});WA.player.state.onVariableChange("module_3_2").subscribe(()=>{p()});WA.player.state.onVariableChange("module_3_1").subscribe(r=>{r==="3"&&WA.chat.sendChatMessage("Prima, du hast weitere verlorene Codeschnipsel gefunden. Diese sind wichtig, um Lord Modrevolt ein für alle Mal aus unserem System zu verbannen. Merk sie dir gut: eine/ ist/ sie","Zirze")});WA.player.state.onVariableChange("module_3_2").subscribe(r=>{r==="3"&&WA.chat.sendChatMessage("Prima, du hast weitere verlorene Codeschnipsel gefunden. Diese sind wichtig, um Lord Modrevolt ein für alle Mal aus unserem System zu verbannen. Merk sie dir gut: zu/ denken/ Art“","Zirze")});WA.onInit().then(()=>{for(const r in d){const e=d[r];f({moduleName:r,triggerValue:e.triggerValue,startX:e.startX,endX:e.endX,startY:e.startY,endY:e.endY})}});for(const r in d){const e=d[r];WA.player.state.onVariableChange(r).subscribe(o=>{o===e.triggerValue&&f({moduleName:r,triggerValue:e.triggerValue,startX:e.startX,endX:e.endX,startY:e.startY,endY:e.endY})})}const V=["Textarten","AllgemeineRegeln","Sprache","Zitiren","Literaturverzeichnis","Literaturverwaltung"];for(const r of V)WA.player.state.onVariableChange(r).subscribe(e=>{_("modul_3",10),console.log(`Variable "${r}" changed to:`,e,"Level up, +10XP")});
//# sourceMappingURL=module3-main-3014cae3.js.map
