import{l as A,b as y,g as b,q as c}from"./quests-80b6f96a.js";import{c as f,p as Q,m as g}from"./footstep-6523c959.js";WA.onInit().then(async()=>{console.log("loading main.ts"),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),WA.player.state.currentQuest||(WA.player.state.currentQuest="quest1"),A("notlog",0);try{await y(),console.log("Scripting API Extra ready")}catch(t){console.error(t)}WA.onInit().then(async()=>{const t=await b();for(const e of t){let o,a=WA.player.name;console.log("Player name:",a),WA.room.area.onEnter(e.name).subscribe(()=>{o=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${e.npcName} zu sprechen.`,callback:()=>{var r;if(WA.chat.sendChatMessage(e.chatText,e.npcName),e.triggerQuest){const n=WA.player.state.currentQuest,l=(r=c.find(W=>W.questId===e.triggerQuest))==null?void 0:r.requireQuest;n===l&&(WA.player.state.currentQuest=e.triggerQuest)}}})}),WA.room.area.onLeave(e.name).subscribe(()=>{o&&(o.remove(),WA.chat.close())})}}),WA.player.onPlayerMove(async({x:t,y:e,moving:o})=>{var r,n,l;const a=await f({x:t,y:e});if(!a){(r=g)==null||r.stop();return}if(!o&&!a){(n=g)==null||n.stop();return}else(l=g)==null||l.stop(),Q(a)});const i=WA.player.state.solvedNotlog,u=WA.player.tags.includes("admin"),s=WA.room.mapURL;console.log("solvedNotlog:",i),console.log("isAdmin:",u),console.log("mapURL:",s),i===!0&&!u&&s.includes("notlog")&&!s.includes("localhost")&&(console.log("Map URL: ",s),WA.nav.goToRoom("./matrix-hub.tmj")),WA.room.area.onEnter("notlog").subscribe(()=>{console.log("Entered notlog area"),i===!0&&!u&&(console.log("Map URL: ",s),s.includes("localhost")||WA.nav.goToRoom("./matrix-hub.tmj"))}),WA.room.area.onEnter("leaveNotlog").subscribe(()=>{console.log("Leaving notlog area"),WA.player.state.solvedNotlog=!0,WA.player.state.currentQuest="quest6"});const p=WA.player.state.currentQuest,d=c.find(t=>t.questId===p);d&&m(d.questId),WA.player.state.onVariableChange("currentQuest").subscribe(t=>{A("notlog",1);const e=c.find(o=>o.questId===t);e&&m(e.questId)});function m(t){const e=c.find(o=>o.questId===t);e&&WA.ui.banner.openBanner({id:e.questId,text:e.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",timeToClose:0,closable:!1})}});WA.room.area.onLeave("H5P_video_1").subscribe(()=>{console.log("Entered H5P_video_1 area, triggering quest5"),WA.player.state.currentQuest="quest5"});
//# sourceMappingURL=notlog-main-281ff002.js.map
