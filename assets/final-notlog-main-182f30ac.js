import{b as A,g,q as c,c as p,p as W,l as b,m as i}from"./quests-07e5fd28.js";WA.onInit().then(async()=>{console.log("loading main.ts"),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),WA.controls.disableRoomList();try{await A(),console.log("Scripting API Extra ready")}catch(t){console.error(t)}WA.onInit().then(async()=>{const t=await g();for(const e of t){let s,a=WA.player.name;console.log("Player name:",a),WA.room.area.onEnter(e.name).subscribe(()=>{s=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${e.npcName} zu sprechen.`,callback:()=>{var r;if(WA.chat.sendChatMessage(e.chatText,e.npcName),e.triggerQuest){const n=WA.player.state.currentQuest,o=(r=c.find(m=>m.questId===e.triggerQuest))==null?void 0:r.requireQuest;n===o&&(WA.player.state.currentQuest=e.triggerQuest)}}}),WA.room.area.onLeave(e.name).subscribe(()=>{WA.chat.close()})}),WA.room.area.onLeave(e.name).subscribe(()=>{s&&(s.remove(),WA.chat.close())})}}),WA.player.onPlayerMove(async({x:t,y:e,moving:s})=>{var r,n,o;const a=await p({x:t,y:e});if(!a){(r=i)==null||r.stop();return}if(!s&&!a){(n=i)==null||n.stop();return}else(o=i)==null||o.stop(),W(a)});const d=WA.player.state.currentQuest,u=c.find(t=>t.questId===d);u&&l(u.questId),WA.player.state.onVariableChange("currentQuest").subscribe(t=>{b("notlog",10);const e=c.find(s=>s.questId===t);e&&l(e.questId)});function l(t){const e=c.find(s=>s.questId===t);e&&WA.ui.banner.openBanner({id:e.questId,text:e.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",timeToClose:0,closable:!1})}});
//# sourceMappingURL=final-notlog-main-182f30ac.js.map
