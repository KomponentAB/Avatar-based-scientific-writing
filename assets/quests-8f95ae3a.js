import{g as h}from"./init-ce66c3a4.js";var u=(e=>(e.wood="wood",e.forest="forest",e.snow="snow",e.marble="marble",e.stone="stone",e.mud="mud",e.path="path",e.water="water",e.sand="sand",e.ice="ice",e))(u||{});const c={[u.wood]:["wood_01_a.wav","wood_01_b.wav","wood_01_c.wav","wood_01_d.wav"],[u.forest]:["forest_01_a.wav","forest_01_b.wav","forest_01_c.wav","forest_01_d.wav","forest_01_e.wav"],[u.snow]:["snow_01_a.wav","snow_01_b.wav","snow_01_c.wav","snow_01_d.wav"],[u.marble]:["marble_01_a.wav","marble_01_b.wav","marble_01_c.wav","marble_01_d.wav"],[u.mud]:["mud_01_a.wav","mud_01_b.wav","mud_01_c.wav","mud_01_d.wav"],[u.path]:["path_01_a.wav","path_01_b.wav","path_01_c.wav","path_01_d.wav","path_01_e.wav"],[u.stone]:["stone_01_a.wav","stone_01_b.wav","stone_01_c.wav","stone_01_d.wav","stone_01_e.wav"],[u.water]:["water_01_a.wav","water_01_b.wav"],[u.sand]:["sand_01_a.wav","sand_01_b.wav","sand_01_c.wav"],[u.ice]:["ice_01.wav","ice_02.wav","ice_03.wav","ice_04.wav"]},p={volume:.05,loop:!1,rate:1.5,detune:1,delay:0,seek:0,mute:!1};let w,m=[];function A(e){if(!c[e])return;const t=Math.floor(Math.random()*c[e].length);w=WA.sound.loadSound(`https://komponentab.github.io/Avatar-based-scientific-writing/sounds/${c[e][t]}`),w.play(p)}async function f(){var e;try{const t=await h(),r=[];for(const a of t.values())if(a.type==="objectgroup"){for(const s of a.objects)if(s.properties&&s.properties.some(n=>n.name==="stepSound"&&n.value===!0)){const n=(e=s.properties.find(o=>o.name==="material"))==null?void 0:e.value;c[n]&&r.push({name:s.name,x:s.x,y:s.y,width:s.width,height:s.height,material:n})}}return console.log("Found step sound areas:",r),r}catch(t){return console.error("Error while getting step sound areas:",t),[]}}function v(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}async function S(e){try{for(const t of m)if(v(e,t))return t.material;return null}catch(t){return console.error("Error while checking player material:",t),null}}WA.onInit().then(async()=>{m=await f()});async function x(){var e,t,r;try{const a=await h(),s=[];for(const n of a.values())if(n.type==="objectgroup"){for(const o of n.objects)if(o.properties&&o.properties.some(i=>i.name==="isNpc"&&i.value===!0)){const i=(e=o.properties.find(d=>d.name==="chatText"))==null?void 0:e.value,l=(t=o.properties.find(d=>d.name==="npcName"))==null?void 0:t.value,g=((r=o.properties.find(d=>d.name==="triggerQuest"))==null?void 0:r.value)??"";i&&l&&s.push({name:o.name,x:o.x,y:o.y,width:o.width??0,height:o.height??0,chatText:String(i),npcName:String(l),triggerQuest:String(g)})}}return console.log("Found chat areas:",s),s}catch(a){return console.error("Error while getting chat areas:",a),[]}}let q="https://admin.workadventu.re";function _(){const e=WA.player.userRoomToken;if(e===void 0)throw new Error("No userRoomToken found. The quests plugin can only work with WorkAdventure SAAS edition (at https://play.workadventu.re).");return e}async function N(e,t){if(!WA.player.isLogged)throw new Error("You must be logged to gain XP.");const r=new URL(`/api/quests/${e}/level-up`,q),a=await fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:_()},body:JSON.stringify({xp:t})});if(!a.ok)throw new Error(`An error occurred. HTTP Code: ${a.status} ${a.statusText}.`);const s=await a.json();return s.awardedBadges.length>0&&(async()=>{for(const n of s.awardedBadges)await b(e,n)})().catch(n=>{console.error(n)}),s}async function b(e,t){const r=new URL(`/quests/${e}/badge/${t}/congratulations`,q);r.search=new URLSearchParams({token:_()}).toString(),await WA.ui.website.open({url:r.toString(),position:{vertical:"middle",horizontal:"middle"},allowApi:!0,visible:!0,size:{width:"100%",height:"100%"}})}const k=[{questName:"Einführung in Notlog",questId:"quest1",questDescription:"Triff Prof. McDongle am Eingang von Notlog.",questXp:100,requireQuest:null,questKey:"notlog"},{questName:"Erkundung des Saals",questId:"quest2",questDescription:"Sprich mit Prof. Mumblecore am nördlichen Ende der großen Halle.",questXp:150,requireQuest:"quest1",questKey:"notlog"},{questName:"Laborbesuch",questId:"quest3",questDescription:"Geh runter ins Labor und sprich mit Prof. Sake.",questXp:200,requireQuest:"quest2",questKey:"notlog"},{questName:"Das Video im Labor ansehen",questId:"quest4",questDescription:"Sieh dir das Video im Labor an.",questXp:50,requireQuest:"quest3",questKey:"notlog"},{questName:"Finde den geheimen Eingang",questId:"quest5",questDescription:"Finde den geheimen Eingang zum Matrix Hub.",questXp:250,requireQuest:"quest4",questKey:"notlog"},{questName:"Löse die Aufgaben im Matrix Hub",questId:"quest6",questDescription:"Löse die Aufgaben im Matrix Hub",questXp:250,requireQuest:"quest5",questKey:"notlog"},{questName:"Durch das Chaos im Labor navigieren",questId:"modul2_quest1",questDescription:"Komm mit der Unordnung im Farblabor zurecht und finde heraus, wer das Chaos angerichtet hat.",questXp:10,requireQuest:"quest5",questKey:"modul2"},{questName:"materialien ordnen",questId:"modul2_quest2",questDescription:"Bringe die Materialien von Alex in Ordnung und erhalte mehr Einblicke in den Kurs 'Wissenschaftliches Arbeiten'.",questXp:10,requireQuest:"modul2_quest1",questKey:"modul2"},{questName:"Meistere 3.2",questId:"modul2_quest3",questDescription:"Schaffe es, 3.2 zu bewältigen, und erhalte Respekt für deinen Einsatz.",questXp:10,requireQuest:"modul2_quest2",questKey:"modul2"},{questName:"Überwinde 3.3",questId:"modul2_quest4",questDescription:"Meistere das nächste Kapitel, 3.3, und lerne noch mehr von Alex' Materialien.",questXp:10,requireQuest:"modul2_quest3",questKey:"modul2"}];export{S as c,x as g,N as l,w as m,A as p,k as q};
//# sourceMappingURL=quests-8f95ae3a.js.map
