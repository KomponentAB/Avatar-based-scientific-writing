import{l as d,b as y,g as b,q as c}from"./quests-585af741.js";import{c as f,p as h,m as g}from"./footstep-06074eb5.js";WA.onInit().then(async()=>{console.log("loading main.ts"),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),WA.player.state.currentQuest||(WA.player.state.currentQuest="quest1"),d("notlog",0);try{await y(),console.log("Scripting API Extra ready")}catch(e){console.error(e)}WA.onInit().then(async()=>{const e=await b();for(const o of e){let t;WA.room.area.onEnter(o.name).subscribe(()=>{t=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${o.npcName} zu sprechen.`,callback:()=>{var r;if(WA.chat.sendChatMessage(o.chatText,o.npcName),o.triggerQuest){const l=WA.player.state.currentQuest,n=(r=c.find(i=>i.questId===o.triggerQuest))==null?void 0:r.requireQuest;l===n&&(WA.player.state.currentQuest=o.triggerQuest)}}})}),WA.room.area.onLeave(o.name).subscribe(()=>{t&&(t.remove(),WA.chat.close())})}}),WA.player.onPlayerMove(async({x:e,y:o,moving:t})=>{var l,n,i;const r=await f({x:e,y:o});if(!r){(l=g)==null||l.stop();return}if(!t&&!r){(n=g)==null||n.stop();return}else(i=g)==null||i.stop(),h(r)}),WA.room.area.onEnter("downstairs_toLab").subscribe(async()=>{if(WA.controls.disablePlayerControls(),WA.controls.disableRightClick(),WA.room.hideLayer("fg-objects/stair-2"),s)return;s=!0;let e=await WA.player.moveTo(1199,996);for(;e.cancelled;)e=await WA.player.moveTo(1199,996);for(e=await WA.player.moveTo(1200,900);e.cancelled;)e=await WA.player.moveTo(1200,900);for(WA.room.showLayer("fg-objects/stair-2"),e=await WA.player.moveTo(1355,1035);e.cancelled;)e=await WA.player.moveTo(1355,1035),WA.controls.restorePlayerControls(),WA.controls.restoreRightClick();s=!1}),WA.room.area.onEnter("upstairs_fromLab").subscribe(async()=>{if(WA.room.showLayer("fg-objects/stair-2"),WA.controls.disablePlayerControls(),WA.controls.disableRightClick(),s)return;s=!0;let e=await WA.player.moveTo(1200,900);for(;e.cancelled;)e=await WA.player.moveTo(1200,900);for(e=await WA.player.moveTo(1199,996);e.cancelled;)e=await WA.player.moveTo(1199,996);for(WA.room.hideLayer("fg-objects/stair-2"),e=await WA.player.moveTo(1355,871);e.cancelled;)e=await WA.player.moveTo(1355,871),WA.controls.restorePlayerControls(),WA.controls.restoreRightClick();s=!1});const u=WA.player.state.solvedNotlog,A=WA.player.tags.includes("admin"),a=WA.room.mapURL;console.log("solvedNotlog:",u),console.log("isAdmin:",A),console.log("mapURL:",a),u===!0&&!A&&a.includes("notlog")&&!a.includes("localhost")&&(console.log("Map URL: ",a),WA.nav.goToRoom("./matrix-hub.tmj")),WA.room.area.onEnter("notlog").subscribe(()=>{console.log("Entered notlog area"),u===!0&&!A&&(console.log("Map URL: ",a),a.includes("localhost")||WA.nav.goToRoom("./matrix-hub.tmj"))}),WA.room.area.onEnter("leaveNotlog").subscribe(()=>{console.log("Leaving notlog area"),WA.player.state.solvedNotlog=!0,WA.player.state.currentQuest="quest6"});const p=WA.player.state.currentQuest,m=c.find(e=>e.questId===p);m&&W(m.questId),WA.player.state.onVariableChange("currentQuest").subscribe(e=>{d("notlog",10);const o=c.find(t=>t.questId===e);o&&W(o.questId)});function W(e){const o=c.find(t=>t.questId===e);o&&WA.ui.banner.openBanner({id:o.questId,text:o.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",closable:!1})}});let s=!1;WA.room.area.onLeave("H5P_video_1").subscribe(()=>{console.log("Entered H5P_video_1 area, triggering quest5"),WA.player.state.currentQuest="quest5"});
//# sourceMappingURL=notlog-main-1f19f748.js.map
