import{b as A,g as y,q as g,c as W,p as h,l as _,m}from"./quests-37e07482.js";WA.onInit().then(async()=>{try{await A(),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),console.log("Scripting API Extra ready")}catch(t){console.error(t)}const r=await y();for(const t of r){let a;WA.room.area.onEnter(t.name).subscribe(()=>{a=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${t.npcName} zu sprechen.`,callback:()=>{var s;if(WA.chat.sendChatMessage(t.chatText,t.npcName),t.triggerQuest){const u=WA.player.state.currentQuest,l=(s=g.find(n=>n.questId===t.triggerQuest))==null?void 0:s.requireQuest;u===l&&(WA.player.state.currentQuest=t.triggerQuest)}}})}),WA.room.area.onLeave(t.name).subscribe(()=>{a&&(a.remove(),WA.chat.close())})}WA.player.onPlayerMove(async({x:t,y:a,moving:s})=>{var l,n,i;const u=await W({x:t,y:a});if(!u){(l=m)==null||l.stop();return}if(!s&&!u){(n=m)==null||n.stop();return}else(i=m)==null||i.stop(),h(u)});const e=WA.player.state.currentQuest,o=g.find(t=>t.questId===e);o&&d(o.questId),WA.player.state.onVariableChange("currentQuest").subscribe(t=>{const a=g.find(s=>s.questId===t);a&&d(a.questId)});function d(t){const a=g.find(s=>s.questId===t);a&&WA.ui.banner.openBanner({id:a.questId,text:a.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",closable:!1})}});function p(r){const{moduleName:e,triggerValue:o,startX:d,endX:t,startY:a,endY:s}=r;if(WA.player.state[e]!==o)return;const u=[],l=[];for(let n=d;n<=t;n++)for(let i=a;i<=s;i++)u.push({x:n,y:i,tile:"green",layer:"green"}),l.push({x:n,y:i,tile:null,layer:"red"});WA.room.setTiles(u),WA.room.setTiles(l)}const c={module_3_1:{triggerValue:"3",startX:4,endX:15,startY:71,endY:89},module_3_2:{triggerValue:"1",startX:4,endX:15,startY:47,endY:70}};let b=!1;function f(){if(b)return;const r=Number(WA.player.state.module_2_1),e=Number(WA.player.state.module_2_2),o=Number(c.module_2_1.triggerValue)+Number(c.module_2_2.triggerValue);r+e===o&&(b=!0,WA.player.state.currentQuest="quest10")}WA.player.state.onVariableChange("module_3_1").subscribe(()=>{f()});WA.player.state.onVariableChange("module_3_2").subscribe(()=>{f()});WA.onInit().then(()=>{for(const r in c){const e=c[r];p({moduleName:r,triggerValue:e.triggerValue,startX:e.startX,endX:e.endX,startY:e.startY,endY:e.endY})}});for(const r in c){const e=c[r];WA.player.state.onVariableChange(r).subscribe(o=>{o===e.triggerValue&&p({moduleName:r,triggerValue:e.triggerValue,startX:e.startX,endX:e.endX,startY:e.startY,endY:e.endY})})}const V=["Textarten","AllgemeineRegeln","Sprache","Zitiren","Literaturverzeichnis","Literaturverwaltung"];for(const r of V)WA.player.state.onVariableChange(r).subscribe(e=>{_("modul_3",10),console.log(`Variable "${r}" changed to:`,e,"Level up, +10XP")});
//# sourceMappingURL=module3-main-a508de0a.js.map
