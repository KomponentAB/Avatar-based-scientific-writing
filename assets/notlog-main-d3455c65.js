import{l as A,b,g as y,q as i}from"./quests-2c2a66d7.js";import{c as f,p as h,m as g}from"./footstep-c8191ba7.js";WA.onInit().then(async()=>{console.log("loading main.ts"),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),WA.controls.disableRoomList(),WA.player.state.currentQuest||(WA.player.state.currentQuest="quest1"),A("notlog",0);try{await b(),console.log("Scripting API Extra ready")}catch(t){console.error(t)}WA.onInit().then(async()=>{const t=await y();for(const e of t){let o,r=WA.player.name;console.log("Player name:",r),WA.room.area.onEnter(e.name).subscribe(()=>{o=WA.ui.displayActionMessage({message:`[LEERTASTE] drücken um mit ${e.npcName} zu sprechen.`,callback:()=>{var n;if(WA.chat.sendChatMessage(e.chatText,e.npcName),e.triggerQuest){const l=WA.player.state.currentQuest,c=(n=i.find(W=>W.questId===e.triggerQuest))==null?void 0:n.requireQuest;l===c&&(WA.player.state.currentQuest=e.triggerQuest)}}}),WA.room.area.onLeave(e.name).subscribe(()=>{WA.chat.close()})}),WA.room.area.onLeave(e.name).subscribe(()=>{o&&(o.remove(),WA.chat.close())})}}),WA.player.onPlayerMove(async({x:t,y:e,moving:o})=>{var n,l,c;const r=await f({x:t,y:e});if(!r){(n=g)==null||n.stop();return}if(!o&&!r){(l=g)==null||l.stop();return}else(c=g)==null||c.stop(),h(r)});const a=WA.player.state.solvedNotlog,u=WA.player.tags.includes("admin"),s=WA.room.mapURL;console.log("solvedNotlog:",a),console.log("isAdmin:",u),console.log("mapURL:",s),a===!0&&!u&&s.includes("notlog")&&!s.includes("localhost")&&(console.log("Map URL: ",s),WA.nav.goToRoom("./matrix-hub.tmj")),WA.room.area.onEnter("notlog").subscribe(()=>{console.log("Entered notlog area"),a===!0&&!u&&(console.log("Map URL: ",s),s.includes("localhost")||WA.nav.goToRoom("./matrix-hub.tmj"))}),WA.room.area.onEnter("leaveNotlog").subscribe(()=>{console.log("Leaving notlog area"),WA.player.state.solvedNotlog=!0,WA.player.state.currentQuest="quest6"});const p=WA.player.state.currentQuest,d=i.find(t=>t.questId===p);d&&m(d.questId),WA.player.state.onVariableChange("currentQuest").subscribe(t=>{A("notlog",10);const e=i.find(o=>o.questId===t);e&&m(e.questId)});function m(t){const e=i.find(o=>o.questId===t);e&&WA.ui.banner.openBanner({id:e.questId,text:e.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",timeToClose:0,closable:!1})}});WA.player.state.onVariableChange("Einführungsvideo").subscribe(a=>{a==="solved"&&(console.log('Variable "finalQuizTwo" solved. Level up, +10XP'),WA.player.state.currentQuest="quest5")});
//# sourceMappingURL=notlog-main-d3455c65.js.map
