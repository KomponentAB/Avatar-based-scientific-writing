import{c as p,p as A,m}from"./footstep-fe30f612.js";import{b,g as y,q as d,l as h}from"./quests-1daa5e21.js";WA.onInit().then(async()=>{try{await b(),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),console.log("Scripting API Extra ready")}catch(e){console.error(e)}const a=await y();for(const e of a){let r;WA.room.area.onEnter(e.name).subscribe(()=>{r=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${e.npcName} zu sprechen.`,callback:()=>{var s;if(WA.chat.sendChatMessage(e.chatText,e.npcName),e.triggerQuest){const o=WA.player.state.currentQuest,i=(s=d.find(n=>n.questId===e.triggerQuest))==null?void 0:s.requireQuest;o===i&&(WA.player.state.currentQuest=e.triggerQuest)}}})}),WA.room.area.onLeave(e.name).subscribe(()=>{r&&(r.remove(),WA.chat.close())})}WA.player.onPlayerMove(async({x:e,y:r,moving:s})=>{var i,n,u;const o=await p({x:e,y:r});if(!o){(i=m)==null||i.stop();return}if(!s&&!o){(n=m)==null||n.stop();return}else(u=m)==null||u.stop(),A(o)});const t=WA.player.state.currentQuest,l=d.find(e=>e.questId===t);l&&c(l.questId),WA.player.state.onVariableChange("currentQuest").subscribe(e=>{const r=d.find(s=>s.questId===e);r&&c(r.questId)});function c(e){const r=d.find(s=>s.questId===e);r&&WA.ui.banner.openBanner({id:r.questId,text:r.questDescription,bgColor:"#1B1B29",timeToClose:0,textColor:"#FFFFFF",closable:!1})}});function f(a){const{moduleName:t,triggerValue:l,startX:c,endX:e,startY:r,endY:s}=a;if(WA.player.state[t]!==l)return;const o=[],i=[];for(let n=c;n<=e;n++)for(let u=r;u<=s;u++)o.push({x:n,y:u,tile:"green",layer:"green"}),i.push({x:n,y:u,tile:null,layer:"red"});WA.room.setTiles(o),WA.room.setTiles(i)}const g={module_1_1:{triggerValue:"1",startX:4,endX:15,startY:71,endY:89},module_1_2:{triggerValue:"1",startX:4,endX:15,startY:47,endY:70}};WA.onInit().then(()=>{for(const a in g){const t=g[a];f({moduleName:a,triggerValue:t.triggerValue,startX:t.startX,endX:t.endX,startY:t.startY,endY:t.endY})}});for(const a in g){const t=g[a];WA.player.state.onVariableChange(a).subscribe(l=>{l===t.triggerValue&&f({moduleName:a,triggerValue:t.triggerValue,startX:t.startX,endX:t.endX,startY:t.startY,endY:t.endY})})}const W=["Textarten","3_1_2AllgemeineRegeln","Sprache","Zitiren","ZitierenImText","Literaturverzeichnis","Literaturverwaltung"];for(const a of W)WA.player.state.onVariableChange(a).subscribe(t=>{h("modul_3",10),console.log(`Variable "${a}" changed to:`,t,"Level up, +10XP")});
//# sourceMappingURL=module1-main-c05d0731.js.map
