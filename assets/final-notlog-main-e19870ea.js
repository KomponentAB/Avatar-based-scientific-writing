import{b as g,g as p,q as i,c as W,p as f,l as m,m as u}from"./quests-f3809c5e.js";WA.onInit().then(async()=>{console.log("loading main.ts"),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),WA.controls.disableRoomList();try{await g(),console.log("Scripting API Extra ready")}catch(r){console.error(r)}});WA.onInit().then(async()=>{const r=await p();for(const e of r){let t,a=WA.player.name;console.log("Player name:",a),WA.room.area.onEnter(e.name).subscribe(()=>{t=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${e.npcName} zu sprechen.`,callback:()=>{var s;if(WA.chat.sendChatMessage(e.chatText.replace("{NameOfPlayer}",a),e.npcName),e.triggerQuest){const o=WA.player.state.currentQuest,n=(s=i.find(c=>c.questId===e.triggerQuest))==null?void 0:s.requireQuest;o===n&&(WA.player.state.currentQuest=e.triggerQuest)}}}),WA.room.area.onLeave(e.name).subscribe(()=>{WA.chat.close()})}),WA.room.area.onLeave(e.name).subscribe(()=>{t&&(t.remove(),WA.chat.close())})}WA.player.onPlayerMove(async({x:e,y:t,moving:a})=>{var o,n,c;const s=await W({x:e,y:t});if(!s){(o=u)==null||o.stop();return}if(!a&&!s){(n=u)==null||n.stop();return}else(c=u)==null||c.stop(),f(s)});const l=WA.player.state.currentQuest,d=i.find(e=>e.questId===l);d&&A(d.questId),WA.player.state.onVariableChange("currentQuest").subscribe(e=>{m("notlog",10);const t=i.find(a=>a.questId===e);t&&A(t.questId)});function A(e){const t=i.find(a=>a.questId===e);t&&WA.ui.banner.openBanner({id:t.questId,text:t.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",timeToClose:0,closable:!1})}});WA.player.state.onVariableChange("4KI").subscribe({next:r=>{r==="solved"&&(m("modul_4",10),console.log('Variable "ThemenfindungGliederung" solved. Level up, +10XP'),WA.player.state.currentQuest="quest28",setTimeout(()=>{try{WA.chat&&typeof WA.chat.close=="function"&&WA.chat.close()}catch(l){console.error("Error closing chat:",l)}},6e4))}});
//# sourceMappingURL=final-notlog-main-e19870ea.js.map
