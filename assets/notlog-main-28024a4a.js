import{l as p,b as y,g as b,q as c,c as f,p as v,m as A}from"./quests-37e07482.js";WA.onInit().then(async()=>{console.log("loading main.ts"),WA.player.state.currentQuest||(WA.player.state.currentQuest="quest1"),p("notlog",0);try{await y(),console.log("Scripting API Extra ready")}catch(e){console.error(e)}WA.onInit().then(async()=>{const e=await b();for(const t of e){let o;WA.room.area.onEnter(t.name).subscribe(()=>{o=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${t.npcName} zu sprechen.`,callback:()=>{var r;if(WA.chat.sendChatMessage(t.chatText,t.npcName),t.triggerQuest){const n=WA.player.state.currentQuest,l=(r=c.find(i=>i.questId===t.triggerQuest))==null?void 0:r.requireQuest;n===l&&(WA.player.state.currentQuest=t.triggerQuest)}}})}),WA.room.area.onLeave(t.name).subscribe(()=>{o&&(o.remove(),WA.chat.close())})}}),WA.player.onPlayerMove(async({x:e,y:t,moving:o})=>{var n,l,i;const r=await f({x:e,y:t});if(!r){(n=A)==null||n.stop();return}if(!o&&!r){(l=A)==null||l.stop();return}else(i=A)==null||i.stop(),v(r)}),WA.room.area.onEnter("downstairs_toLab").subscribe(async()=>{if(WA.room.hideLayer("fg-objects/stair-2"),s)return;s=!0;let e=await WA.player.moveTo(1199,996);for(;e.cancelled;)e=await WA.player.moveTo(1199,996);for(e=await WA.player.moveTo(1200,900);e.cancelled;)e=await WA.player.moveTo(1200,900);for(WA.room.showLayer("fg-objects/stair-2"),e=await WA.player.moveTo(1355,1035);e.cancelled;)e=await WA.player.moveTo(1355,1035);s=!1}),WA.room.area.onEnter("upstairs_fromLab").subscribe(async()=>{if(WA.room.showLayer("fg-objects/stair-2"),s)return;s=!0;let e=await WA.player.moveTo(1200,900);for(;e.cancelled;)e=await WA.player.moveTo(1200,900);for(e=await WA.player.moveTo(1199,996);e.cancelled;)e=await WA.player.moveTo(1199,996);for(WA.room.hideLayer("fg-objects/stair-2"),e=await WA.player.moveTo(1355,871);e.cancelled;)e=await WA.player.moveTo(1355,871);s=!1});const u=WA.player.state.solvedNotlog,m=WA.player.tags.includes("admin"),a=WA.room.mapURL;console.log("solvedNotlog:",u),console.log("isAdmin:",m),console.log("mapURL:",a),u===!0&&!m&&a.includes("notlog")&&!a.includes("localhost")&&(console.log("Map URL: ",a),WA.nav.goToRoom("./matrix-hub.tmj")),WA.room.area.onEnter("notlog").subscribe(()=>{console.log("Entered notlog area"),u===!0&&!m&&(console.log("Map URL: ",a),a.includes("localhost")||WA.nav.goToRoom("./matrix-hub.tmj"))}),WA.room.area.onEnter("leaveNotlog").subscribe(()=>{console.log("Leaving notlog area"),WA.player.state.solvedNotlog=!0,WA.player.state.currentQuest="quest6"});const W=WA.player.state.currentQuest,g=c.find(e=>e.questId===W);g&&d(g.questId),WA.player.state.onVariableChange("currentQuest").subscribe(e=>{p("notlog",10);const t=c.find(o=>o.questId===e);t&&d(t.questId)});function d(e){const t=c.find(o=>o.questId===e);t&&WA.ui.banner.openBanner({id:t.questId,text:t.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",closable:!1})}});let s=!1;WA.room.area.onLeave("H5P_video_1").subscribe(()=>{console.log("Entered H5P_video_1 area, triggering quest5"),WA.player.state.currentQuest="quest5"});
//# sourceMappingURL=notlog-main-28024a4a.js.map
