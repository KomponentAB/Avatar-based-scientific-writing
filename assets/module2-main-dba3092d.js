import{c as A,p as W,m as b}from"./footstep-1b0f56b4.js";import{b as y,g as _,q as g,l as Q}from"./quests-9d256112.js";WA.onInit().then(async()=>{try{await y(),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),console.log("Scripting API Extra ready")}catch(r){console.error(r)}const e=await _();for(const r of e){let s;WA.room.area.onEnter(r.name).subscribe(()=>{s=WA.ui.displayActionMessage({message:`[LEERTASTE] drücken um mit ${r.npcName} zu sprechen.`,callback:()=>{var a;if(WA.chat.sendChatMessage(r.chatText,r.npcName),r.triggerQuest){const o=WA.player.state.currentQuest,i=(a=g.find(n=>n.questId===r.triggerQuest))==null?void 0:a.requireQuest;o===i&&(WA.player.state.currentQuest=r.triggerQuest)}}})}),WA.room.area.onLeave(r.name).subscribe(()=>{s&&(s.remove(),WA.chat.close())})}WA.player.onPlayerMove(async({x:r,y:s,moving:a})=>{var i,n,l;const o=await A({x:r,y:s});if(!o){(i=b)==null||i.stop();return}if(!a&&!o){(n=b)==null||n.stop();return}else(l=b)==null||l.stop(),W(o)});const t=WA.player.state.currentQuest,u=g.find(r=>r.questId===t);u&&d(u.questId),WA.player.state.onVariableChange("currentQuest").subscribe(r=>{const s=g.find(a=>a.questId===r);s&&d(s.questId)});function d(r){const s=g.find(a=>a.questId===r);s&&WA.ui.banner.openBanner({id:s.questId,text:s.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",closable:!1})}});WA.room.area.onEnter("triggerM2Quests").subscribe(()=>{WA.player.state.currentQuest="quest9"});function p(e){const{moduleName:t,triggerValue:u,startX:d,endX:r,startY:s,endY:a}=e;if(WA.player.state[t]!==u)return;const o=[],i=[];for(let n=d;n<=r;n++)for(let l=s;l<=a;l++)o.push({x:n,y:l,tile:"green",layer:"green"}),i.push({x:n,y:l,tile:null,layer:"red"});WA.room.setTiles(o),WA.room.setTiles(i)}const c={module_2_1:{triggerValue:"2",startX:4,endX:15,startY:71,endY:89},module_2_2:{triggerValue:"2",startX:4,endX:15,startY:47,endY:70}};let f=!1;function h(){if(f)return;const e=Number(WA.player.state.module_2_1),t=Number(WA.player.state.module_2_2),u=Number(c.module_2_1.triggerValue)+Number(c.module_2_2.triggerValue);e+t===u&&(f=!0,WA.player.state.currentQuest="quest16",WA.player.state.module2="solved")}WA.player.state.onVariableChange("module_2_1").subscribe(()=>{h()});WA.player.state.onVariableChange("module_2_2").subscribe(()=>{h()});WA.player.state.onVariableChange("module_2_1").subscribe(e=>{e==="2"&&WA.chat.sendChatMessage("Prima, du hast die ersten verlorenen Codeschnipsel gefunden. Diese sind wichtig, um Lord Modrevolt ein für alle Mal aus unserem System zu verbannen. Merk sie dir gut: ist / Wissenschaft / mehr","Zirze")});WA.player.state.onVariableChange("module_2_2").subscribe(e=>{e==="2"&&WA.chat.sendChatMessage("Prima, du hast weitere verlorene Codeschnipsel gefunden. Diese sind wichtig, um Lord Modrevolt ein für alle Mal aus unserem System zu verbannen. Merk sie dir gut: eine/ als/ Wissenssammlung","Zirze")});WA.onInit().then(()=>{for(const e in c){const t=c[e];p({moduleName:e,triggerValue:t.triggerValue,startX:t.startX,endX:t.endX,startY:t.startY,endY:t.endY})}});for(const e in c){const t=c[e];WA.player.state.onVariableChange(e).subscribe(u=>{u===t.triggerValue&&p({moduleName:e,triggerValue:t.triggerValue,startX:t.startX,endX:t.endX,startY:t.startY,endY:t.endY})})}const q=["PlanungSelbstmanagement","ThemenfindungGliederung","Literaturrecherche","Lesen"],m={};for(const e of q)m[e]=!1,WA.player.state.onVariableChange(e).subscribe(t=>{Q("modul_2",10),console.log(`Variable "${e}" changed to:`,t,"Level up, +10XP"),m[e]=t==="solved",e==="PlanungSelbstmanagement"&&t==="solved"&&(WA.player.state.currentQuest="quest10"),m.PlanungSelbstmanagement&&m.ThemenfindungGliederung&&(WA.player.state.currentQuest="quest11"),(e==="Lesen"||e==="Literaturrecherche")&&t==="solved"&&(WA.player.state.currentQuest="quest14")});
//# sourceMappingURL=module2-main-dba3092d.js.map
