import{g as p,q as d,c as A,p as y,l as b,m}from"./quests-934347e5.js";import{b as h}from"./init-ce66c3a4.js";WA.onInit().then(async()=>{try{await h(),console.log("Scripting API Extra ready")}catch(e){console.error(e)}const a=await p();for(const e of a){let r;WA.room.area.onEnter(e.name).subscribe(()=>{r=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${e.npcName} zu sprechen.`,callback:()=>{var s;if(WA.chat.sendChatMessage(e.chatText,e.npcName),e.triggerQuest){const o=WA.player.state.currentQuest,i=(s=d.find(n=>n.questId===e.triggerQuest))==null?void 0:s.requireQuest;o===i&&(WA.player.state.currentQuest=e.triggerQuest)}}})}),WA.room.area.onLeave(e.name).subscribe(()=>{r&&(r.remove(),WA.chat.close())})}WA.player.onPlayerMove(async({x:e,y:r,moving:s})=>{var i,n,u;const o=await A({x:e,y:r});if(!o){(i=m)==null||i.stop();return}if(!s&&!o){(n=m)==null||n.stop();return}else(u=m)==null||u.stop(),y(o)});const t=WA.player.state.currentQuest,l=d.find(e=>e.questId===t);l&&c(l.questId),WA.player.state.onVariableChange("currentQuest").subscribe(e=>{const r=d.find(s=>s.questId===e);r&&c(r.questId)});function c(e){const r=d.find(s=>s.questId===e);r&&WA.ui.banner.openBanner({id:r.questId,text:r.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",closable:!1})}});function f(a){const{moduleName:t,triggerValue:l,startX:c,endX:e,startY:r,endY:s}=a;if(WA.player.state[t]!==l)return;const o=[],i=[];for(let n=c;n<=e;n++)for(let u=r;u<=s;u++)o.push({x:n,y:u,tile:"green",layer:"green"}),i.push({x:n,y:u,tile:null,layer:"red"});WA.room.setTiles(o),WA.room.setTiles(i)}const g={module_3_1:{max:3,triggerValue:"3",startX:4,endX:15,startY:71,endY:89},module_3_2:{max:4,triggerValue:"1",startX:4,endX:15,startY:47,endY:70}};WA.onInit().then(()=>{for(const a in g){const t=g[a];f({moduleName:a,triggerValue:t.triggerValue,startX:t.startX,endX:t.endX,startY:t.startY,endY:t.endY})}});for(const a in g){const t=g[a];WA.player.state.onVariableChange(a).subscribe(l=>{l===t.triggerValue&&f({moduleName:a,triggerValue:t.triggerValue,startX:t.startX,endX:t.endX,startY:t.startY,endY:t.endY})})}const W=["Textarten","3_1_2AllgemeineRegeln","Sprache","Zitiren","ZitierenImText","Literaturverzeichnis","Literaturverwaltung"];for(const a of W)WA.player.state.onVariableChange(a).subscribe(t=>{b("modul_3",10),console.log(`Variable "${a}" changed to:`,t,"Level up, +10XP")});
//# sourceMappingURL=module3-main-45600a2b.js.map
