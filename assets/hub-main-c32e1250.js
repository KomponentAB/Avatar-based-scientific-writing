import{l as d,b as A,g as m,q as i}from"./quests-585af741.js";WA.onInit().then(async()=>{console.log("loading main.ts"),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),WA.player.state.currentQuest||(WA.player.state.currentQuest="quest6"),d("notlog",0);try{await A(),console.log("Scripting API Extra ready")}catch(e){console.error(e)}const a=await m();for(const e of a){let t;WA.room.area.onEnter(e.name).subscribe(()=>{t=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${e.npcName} zu sprechen.`,callback:()=>{var o;if(WA.chat.sendChatMessage(e.chatText,e.npcName),e.triggerQuest){const l=WA.player.state.currentQuest,c=(o=i.find(u=>u.questId===e.triggerQuest))==null?void 0:o.requireQuest;l===c&&(WA.player.state.currentQuest=e.triggerQuest)}}})}),WA.room.area.onLeave(e.name).subscribe(()=>{t&&(t.remove(),WA.chat.close())})}const r=WA.player.state.currentQuest,n=i.find(e=>e.questId===r);n&&s(n.questId),WA.player.state.onVariableChange("currentQuest").subscribe(e=>{const t=i.find(o=>o.questId===e);t&&s(t.questId)});function s(e){const t=i.find(o=>o.questId===e);t&&WA.ui.banner.openBanner({id:t.questId,text:t.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",closable:!1})}});WA.onInit().then(async()=>{WA.player.state.module2==="solved"&&WA.player.state.module3==="solved"?(WA.room.area.onEnter("finalCodeTerminal").subscribe(()=>{WA.chat.sendChatMessage("enter code","Terminal")}),WA.chat.onChatMessage((a,r)=>{r.authorId===void 0&&(a.includes("code")?WA.chat.sendChatMessage("Your message was correct!","Zirze"):WA.chat.sendChatMessage("Error: your message did not contain 'code'.","Terminal"))},{scope:"local"})):WA.room.area.onEnter("finalCodeTerminal").subscribe(()=>{WA.chat.sendChatMessage("Solve module2 and module3 and come back here and enter the correct code to repair the matrix","Terminal")}),WA.room.area.onLeave("finalCodeTerminal").subscribe(()=>{WA.chat.close()})});WA.onInit().then(()=>{function a(){if(WA.player.state.module2==="solved"&&WA.player.state.module3==="solved"){const r=[],n=[];for(let s=0;s<=47;s++)for(let e=0;e<=36;e++)r.push({x:s,y:e,tile:"green",layer:"green"}),n.push({x:s,y:e,tile:null,layer:"red"});WA.room.setTiles(r),WA.room.setTiles(n)}}WA.player.state.onVariableChange("module2").subscribe(a),WA.player.state.onVariableChange("module3").subscribe(a),a()});
//# sourceMappingURL=hub-main-c32e1250.js.map
