import{l as p,b,g as f,q as i,c as v,p as h,m}from"./quests-1056fa93.js";WA.onInit().then(async()=>{console.log("loading main.ts"),WA.player.state.currentQuest||(WA.player.state.currentQuest="quest1"),p("notlog",0);try{await b(),console.log("Scripting API Extra ready")}catch(e){console.error(e)}const W=await f();for(const e of W){let t;WA.room.area.onEnter(e.name).subscribe(()=>{t=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${e.npcName} zu sprechen.`,callback:()=>{var o;if(WA.chat.sendChatMessage(e.chatText,e.npcName),e.triggerQuest){const s=WA.player.state.currentQuest,n=(o=i.find(l=>l.questId===e.triggerQuest))==null?void 0:o.requireQuest;s===n&&(WA.player.state.currentQuest=e.triggerQuest)}}})}),WA.room.area.onLeave(e.name).subscribe(()=>{t&&(t.remove(),WA.chat.close())})}WA.player.onPlayerMove(async({x:e,y:t,moving:o})=>{var n,l,d;const s=await v({x:e,y:t});if(!s){(n=m)==null||n.stop();return}if(!o&&!s){(l=m)==null||l.stop();return}else(d=m)==null||d.stop(),h(s)}),WA.room.area.onEnter("downstairs_toLab").subscribe(async()=>{if(WA.room.hideLayer("fg-objects/stair-2"),r)return;r=!0;let e=await WA.player.moveTo(1199,996);for(;e.cancelled;)e=await WA.player.moveTo(1199,996);for(e=await WA.player.moveTo(1200,900);e.cancelled;)e=await WA.player.moveTo(1200,900);for(WA.room.showLayer("fg-objects/stair-2"),e=await WA.player.moveTo(1355,1035);e.cancelled;)e=await WA.player.moveTo(1355,1035);r=!1}),WA.room.area.onEnter("upstairs_fromLab").subscribe(async()=>{if(WA.room.showLayer("fg-objects/stair-2"),r)return;r=!0;let e=await WA.player.moveTo(1200,900);for(;e.cancelled;)e=await WA.player.moveTo(1200,900);for(e=await WA.player.moveTo(1199,996);e.cancelled;)e=await WA.player.moveTo(1199,996);for(WA.room.hideLayer("fg-objects/stair-2"),e=await WA.player.moveTo(1355,871);e.cancelled;)e=await WA.player.moveTo(1355,871);r=!1});const c=WA.player.state.solvedNotlog,u=WA.player.tags.includes("admin"),a=WA.room.mapURL;console.log("solvedNotlog:",c),console.log("isAdmin:",u),console.log("mapURL:",a),c===!0&&!u&&a.includes("notlog")&&!a.includes("localhost")&&(console.log("Map URL: ",a),WA.nav.goToRoom("./matrix-hub.tmj")),WA.room.area.onEnter("notlog").subscribe(()=>{console.log("Entered notlog area"),c===!0&&!u&&(console.log("Map URL: ",a),a.includes("localhost")||WA.nav.goToRoom("./matrix-hub.tmj"))}),WA.room.area.onEnter("leaveNotlog").subscribe(()=>{console.log("Leaving notlog area"),WA.player.state.solvedNotlog=!0,WA.player.state.currentQuest="quest6"});const y=WA.player.state.currentQuest,g=i.find(e=>e.questId===y);g&&A(g.questId),WA.player.state.onVariableChange("currentQuest").subscribe(e=>{p("notlog",10);const t=i.find(o=>o.questId===e);t&&A(t.questId)});function A(e){const t=i.find(o=>o.questId===e);t&&WA.ui.banner.openBanner({id:t.questId,text:t.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",closable:!1})}});let r=!1;WA.room.area.onLeave("H5P_video_1").subscribe(()=>{console.log("Entered H5P_video_1 area, triggering quest5"),WA.player.state.currentQuest="quest5"});
//# sourceMappingURL=notlog-main-1089b580.js.map
