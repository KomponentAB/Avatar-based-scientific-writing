import{b as y}from"./init-ce66c3a4.js";import{l as f,g as b,q as i,c as h,p as w,m}from"./quests-779fea6d.js";WA.onInit().then(async()=>{console.log("loading main.ts"),WA.player.state.currentQuest||(WA.player.state.currentQuest="quest1"),f("notlog",0);try{await y(),console.log("Scripting API Extra ready")}catch(e){console.error(e)}const p=await b();for(const e of p){let o;WA.room.area.onEnter(e.name).subscribe(()=>{o=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${e.npcName} zu sprechen.`,callback:()=>{var a;if(WA.chat.sendChatMessage(e.chatText,e.npcName),e.triggerQuest){const s=WA.player.state.currentQuest,l=(a=i.find(n=>n.questId===e.triggerQuest))==null?void 0:a.requireQuest;s===l&&(WA.player.state.currentQuest=e.triggerQuest)}}})}),WA.room.area.onLeave(e.name).subscribe(()=>{o&&(o.remove(),WA.chat.close())})}WA.player.onPlayerMove(async({x:e,y:o,moving:a})=>{var l,n,d;const s=await h({x:e,y:o});if(!s){(l=m)==null||l.stop();return}if(!a&&!s){(n=m)==null||n.stop();return}else(d=m)==null||d.stop(),w(s)}),WA.room.area.onEnter("downstairs_toLab").subscribe(async()=>{if(WA.room.hideLayer("fg-objects/stair-2"),r)return;r=!0;let e=await WA.player.moveTo(1300,1728);for(;e.cancelled;)e=await WA.player.moveTo(1300,1728);for(e=await WA.player.moveTo(1325,1643);e.cancelled;)e=await WA.player.moveTo(1325,1643);for(WA.room.showLayer("fg-objects/stair-2"),e=await WA.player.moveTo(1503,1754);e.cancelled;)e=await WA.player.moveTo(1503,1754);r=!1}),WA.room.area.onEnter("upstairs_fromLab").subscribe(async()=>{if(WA.room.showLayer("fg-objects/stair-2"),r)return;r=!0;let e=await WA.player.moveTo(1325,1643);for(;e.cancelled;)e=await WA.player.moveTo(1325,1643);for(e=await WA.player.moveTo(1300,1728);e.cancelled;)e=await WA.player.moveTo(1300,1728);for(WA.room.hideLayer("fg-objects/stair-2"),e=await WA.player.moveTo(1513,1568);e.cancelled;)e=await WA.player.moveTo(1513,1568);r=!1});const c=WA.player.state.solvedNotlog,u=WA.player.tags.includes("admin"),t=WA.room.mapURL;console.log("solvedNotlog:",c),console.log("isAdmin:",u),console.log("mapURL:",t),c===!0&&!u&&t.includes("notlog")&&!t.includes("localhost")&&(console.log("Map URL: ",t),WA.nav.goToRoom("./matrix-hub.tmj")),WA.room.area.onEnter("notlog").subscribe(()=>{console.log("Entered notlog area"),c===!0&&!u&&(console.log("Map URL: ",t),t.includes("localhost")||WA.nav.goToRoom("./matrix-hub.tmj"))}),WA.room.area.onEnter("leaveNotlog").subscribe(()=>{console.log("Leaving notlog area"),WA.player.state.solvedNotlog=!0});const W=WA.player.state.currentQuest,A=i.find(e=>e.questId===W);A&&g(A.questId),WA.player.state.onVariableChange("currentQuest").subscribe(e=>{const o=i.find(a=>a.questId===e);o&&g(o.questId)});function g(e){const o=i.find(a=>a.questId===e);o&&WA.ui.banner.openBanner({id:o.questId,text:o.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",closable:!1})}});let r=!1;
//# sourceMappingURL=notlog-main-856416f6.js.map
