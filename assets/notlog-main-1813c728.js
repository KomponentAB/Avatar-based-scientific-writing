import{b as y}from"./init-ce66c3a4.js";import{l as f,g as b,q as i,c as v,p as h,m}from"./quests-8f95ae3a.js";WA.onInit().then(async()=>{console.log("loading main.ts"),WA.player.state.currentQuest||(WA.player.state.currentQuest="quest1"),f("notlog",0);try{await y(),console.log("Scripting API Extra ready")}catch(e){console.error(e)}const p=await b();for(const e of p){let t;WA.room.area.onEnter(e.name).subscribe(()=>{t=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${e.npcName} zu sprechen.`,callback:()=>{var o;if(WA.chat.sendChatMessage(e.chatText,e.npcName),e.triggerQuest){const s=WA.player.state.currentQuest,n=(o=i.find(l=>l.questId===e.triggerQuest))==null?void 0:o.requireQuest;s===n&&(WA.player.state.currentQuest=e.triggerQuest)}}})}),WA.room.area.onLeave(e.name).subscribe(()=>{t&&(t.remove(),WA.chat.close())})}WA.player.onPlayerMove(async({x:e,y:t,moving:o})=>{var n,l,d;const s=await v({x:e,y:t});if(!s){(n=m)==null||n.stop();return}if(!o&&!s){(l=m)==null||l.stop();return}else(d=m)==null||d.stop(),h(s)}),WA.room.area.onEnter("downstairs_toLab").subscribe(async()=>{if(WA.room.hideLayer("fg-objects/stair-2"),r)return;r=!0;let e=await WA.player.moveTo(1198,1735);for(;e.cancelled;)e=await WA.player.moveTo(1198,1735);for(e=await WA.player.moveTo(1198,1636);e.cancelled;)e=await WA.player.moveTo(1198,1636);for(WA.room.showLayer("fg-objects/stair-2"),e=await WA.player.moveTo(1360,1770);e.cancelled;)e=await WA.player.moveTo(1360,1770);r=!1}),WA.room.area.onEnter("upstairs_fromLab").subscribe(async()=>{if(WA.room.showLayer("fg-objects/stair-2"),r)return;r=!0;let e=await WA.player.moveTo(1200,1650);for(;e.cancelled;)e=await WA.player.moveTo(1200,1650);for(e=await WA.player.moveTo(1200,1750);e.cancelled;)e=await WA.player.moveTo(1200,1750);for(WA.room.hideLayer("fg-objects/stair-2"),e=await WA.player.moveTo(1360,1615);e.cancelled;)e=await WA.player.moveTo(1360,1615);r=!1});const c=WA.player.state.solvedNotlog,u=WA.player.tags.includes("admin"),a=WA.room.mapURL;console.log("solvedNotlog:",c),console.log("isAdmin:",u),console.log("mapURL:",a),c===!0&&!u&&a.includes("notlog")&&!a.includes("localhost")&&(console.log("Map URL: ",a),WA.nav.goToRoom("./matrix-hub.tmj")),WA.room.area.onEnter("notlog").subscribe(()=>{console.log("Entered notlog area"),c===!0&&!u&&(console.log("Map URL: ",a),a.includes("localhost")||WA.nav.goToRoom("./matrix-hub.tmj"))}),WA.room.area.onEnter("leaveNotlog").subscribe(()=>{console.log("Leaving notlog area"),WA.player.state.solvedNotlog=!0,WA.player.state.currentQuest="quest6"});const W=WA.player.state.currentQuest,A=i.find(e=>e.questId===W);A&&g(A.questId),WA.player.state.onVariableChange("currentQuest").subscribe(e=>{const t=i.find(o=>o.questId===e);t&&g(t.questId)});function g(e){const t=i.find(o=>o.questId===e);t&&WA.ui.banner.openBanner({id:t.questId,text:t.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",closable:!1})}});let r=!1;WA.room.area.onEnter("H5P_video_1").subscribe(()=>{console.log("Entered H5P_video_1 area, triggering quest5"),WA.player.state.currentQuest="quest5"});
//# sourceMappingURL=notlog-main-1813c728.js.map
